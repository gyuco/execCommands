{
  "version": 3,
  "sources": ["../src/extension.ts", "../src/CodelensProvider.ts"],
  "sourcesContent": ["// The module 'vscode' contains the VS Code extensibility API\n// Import the module and reference it with the alias vscode in your code below\nimport { ExtensionContext, languages, commands, Disposable, workspace, window } from 'vscode';\nimport { CodelensProvider } from './CodelensProvider';\n\n// this method is called when your extension is activated\n// your extension is activated the very first time the command is executed\n\nlet disposables: Disposable[] = [];\n\nexport function activate(context: ExtensionContext) {\n    const codelensProvider = new CodelensProvider();\n\n    languages.registerCodeLensProvider(\"*\", codelensProvider);\n\n    commands.registerCommand(\"exec-commands.enableExecCommands\", () => {\n        workspace.getConfiguration(\"exec-commands\").update(\"disableExecCommands\", true, true);\n    });\n\n    commands.registerCommand(\"exec-commands.disableExecCommands\", () => {\n        workspace.getConfiguration(\"exec-commands\").update(\"disableExecCommands\", false, true);\n    });\n\n    commands.registerCommand(\"exec-commands.execCommandsNewConsoleAction\", (args: any) => {\n        openNewConsole(args);\n    });\n\n    commands.registerCommand(\"exec-commands.execCommandsAction\", (args: any) => {\n        if(window.activeTerminal) {\n            window.activeTerminal?.sendText(args);\n        } else {\n            openNewConsole(args);\n        }\n    });\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() {\n    if (disposables) {\n        disposables.forEach(item => item.dispose());\n    }\n    disposables = [];\n}\n\nfunction openNewConsole(args: string) {\n    const terminal = window.createTerminal();\n    terminal.sendText(args);\n    terminal.show(true);\n}\n", "import * as vscode from 'vscode';\n\n/**\n * CodelensProvider\n */\nexport class CodelensProvider implements vscode.CodeLensProvider {\n\n    private codeLenses: vscode.CodeLens[] = [];\n    private regex: RegExp;\n    private _onDidChangeCodeLenses: vscode.EventEmitter<void> = new vscode.EventEmitter<void>();\n    public readonly onDidChangeCodeLenses: vscode.Event<void> = this._onDidChangeCodeLenses.event;\n\n    constructor() {\n        this.regex = /COMMAND/g;\n\n        vscode.workspace.onDidChangeConfiguration((_) => {\n            this._onDidChangeCodeLenses.fire();\n        });\n    }\n\n    public provideCodeLenses(document: vscode.TextDocument, token: vscode.CancellationToken): vscode.CodeLens[] | Thenable<vscode.CodeLens[]> {\n\n        if (vscode.workspace.getConfiguration(\"exec-commands\").get(\"enableCodeLens\", true)) {\n            this.codeLenses = [];\n            const regex = new RegExp(this.regex);\n            const text = document.getText();\n            let matches;\n            while ((matches = regex.exec(text)) !== null) {\n                const line = document.lineAt(document.positionAt(matches.index).line);\n                const indexOf = line.text.indexOf(matches[0]);\n                const position = new vscode.Position(line.lineNumber, indexOf);\n                const range = document.getWordRangeAtPosition(position, new RegExp(this.regex));\n                if (range) {\n\n                    const consoleCommand = line.text.replace('COMMAND ', '');\n\n                    const command = {\n                        title: \"Exec\",\n                        tooltip: `Exec command ${consoleCommand}`,\n                        command: \"exec-commands.execCommandsAction\",\n                        arguments: [consoleCommand]\n                    };\n                    this.codeLenses.push(new vscode.CodeLens(range, command));\n\n                    const command2 = {\n                        title: \"Exec in a new terminal\",\n                        tooltip: `Exec command ${consoleCommand}`,\n                        command: \"exec-commands.execCommandsNewConsoleAction\",\n                        arguments: [consoleCommand]\n                    };\n\n                    this.codeLenses.push(new vscode.CodeLens(range, command2));\n\n                }\n            }\n            return this.codeLenses;\n        }\n        return [];\n    }\n\n    public resolveCodeLens(codeLens: vscode.CodeLens, token: vscode.CancellationToken) {\n\n        if (vscode.workspace.getConfiguration(\"exec-commands\").get(\"enableExecCommands\", true)) {\n            return codeLens;\n        }\n        return null;\n    }\n}\n\n"],
  "mappings": "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",
  "names": []
}
